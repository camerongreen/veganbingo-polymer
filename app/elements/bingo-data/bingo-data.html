<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="bingo-data" attributes="tiles">
  <template>
    <bingo-settings id="settings"></bingo-settings>
    <core-ajax id="ajax" auto url="../../scripts/data.json"
               handleAs="json" on-core-response="{{tilesLoaded}}"></core-ajax>
  </template>
  <script>
    (function () {
      Polymer({
        created: function () {
          this.tiles = {};
        },
        tilesLoaded: function () {
          var settings = this.$.settings.get();
          this.tiles = Object.create(this.$.ajax.response);
          for (var tile in this.tiles) {
            this.tiles[tile].done = settings.hasOwnProperty(tile) ? settings[tile] : false;
          }
        },
        getTiles: function() {
          return this.tiles;
        }
      });
    })();
  </script>
</polymer-element>
